   1               		.file	"light_pool.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
  10               		.text
  11               	.Ltext0:
 354               	.global	in_light_pool
 356               	in_light_pool:
 357               		.stabd	46,0,0
   1:../../../projects/dicio/utility/light_pool.c **** /**
   2:../../../projects/dicio/utility/light_pool.c ****  * 18-748 Wireless Sensor Networks
   3:../../../projects/dicio/utility/light_pool.c ****  * Spring 2016
   4:../../../projects/dicio/utility/light_pool.c ****  * Lab 3: Multi-Hop Communication
   5:../../../projects/dicio/utility/light_pool.c ****  * light_pool.c
   6:../../../projects/dicio/utility/light_pool.c ****  * Kedar Amladi // kamladi. Daniel Santoro // ddsantor. Adam Selevan // aselevan.
   7:../../../projects/dicio/utility/light_pool.c ****  */
   8:../../../projects/dicio/utility/light_pool.c ****  
   9:../../../projects/dicio/utility/light_pool.c **** #include <light_pool.h>
  10:../../../projects/dicio/utility/light_pool.c **** 
  11:../../../projects/dicio/utility/light_pool.c **** 
  12:../../../projects/dicio/utility/light_pool.c **** /*** LIGHT POOL OPERATIONS ***/
  13:../../../projects/dicio/utility/light_pool.c **** /**
  14:../../../projects/dicio/utility/light_pool.c ****  * id_in_light_pool:
  15:../../../projects/dicio/utility/light_pool.c ****  *  - determine if node_address is in the light pool
  16:../../../projects/dicio/utility/light_pool.c ****  *
  17:../../../projects/dicio/utility/light_pool.c ****  * @param lp - sequence pool to search
  18:../../../projects/dicio/utility/light_pool.c ****  * @param node_address - node to search for
  19:../../../projects/dicio/utility/light_pool.c ****  * @returns '1' if id found, '-1' otherwise
  20:../../../projects/dicio/utility/light_pool.c ****  */
  21:../../../projects/dicio/utility/light_pool.c **** int8_t in_light_pool(light_pool_t *lp, uint8_t node_address) {
 359               	.LM0:
 360               	.LFBB1:
 361               	/* prologue: function */
 362               	/* frame size = 0 */
 363               	/* stack size = 0 */
 364               	.L__stack_usage = 0
 365               	.LBB2:
  22:../../../projects/dicio/utility/light_pool.c ****     for(uint8_t i = 0; i < lp->size; i++) {
 367               	.LM1:
 368 0000 FC01      		movw r30,r24
 369 0002 2191      		ld r18,Z+
 370 0004 CF01      		movw r24,r30
 371               	.L2:
 372 0006 3E2F      		mov r19,r30
 373 0008 381B      		sub r19,r24
 375               	.LM2:
 376 000a 3217      		cp r19,r18
 377 000c 00F4      		brsh .L7
  23:../../../projects/dicio/utility/light_pool.c ****         if(lp->node_id[i] == node_address) {
 379               	.LM3:
 380 000e 3191      		ld r19,Z+
 381 0010 3613      		cpse r19,r22
 382 0012 00C0      		rjmp .L2
  24:../../../projects/dicio/utility/light_pool.c ****             return 1;
 384               	.LM4:
 385 0014 81E0      		ldi r24,lo8(1)
 386               	.LBE2:
  25:../../../projects/dicio/utility/light_pool.c ****         }
  26:../../../projects/dicio/utility/light_pool.c ****     }
  27:../../../projects/dicio/utility/light_pool.c ****     return -1;
  28:../../../projects/dicio/utility/light_pool.c **** }
 388               	.LM5:
 389 0016 0895      		ret
 390               	.L7:
  27:../../../projects/dicio/utility/light_pool.c **** }
 392               	.LM6:
 393 0018 8FEF      		ldi r24,lo8(-1)
 394               	.LBB3:
 395 001a 0895      		ret
 396               	.LBE3:
 398               	.Lscope1:
 400               		.stabd	78,0,0
 404               	.global	get_light_pool_index
 406               	get_light_pool_index:
 407               		.stabd	46,0,0
  29:../../../projects/dicio/utility/light_pool.c **** 
  30:../../../projects/dicio/utility/light_pool.c **** /**
  31:../../../projects/dicio/utility/light_pool.c ****  * get_light_pool_index:
  32:../../../projects/dicio/utility/light_pool.c ****  *  - return the index of the node_address in the light pool
  33:../../../projects/dicio/utility/light_pool.c ****  *
  34:../../../projects/dicio/utility/light_pool.c ****  * @param lp - light pool to be searched
  35:../../../projects/dicio/utility/light_pool.c ****  * @param node_address - node to search for
  36:../../../projects/dicio/utility/light_pool.c ****  * @returns index of node_address if found, '-1' otherwise
  37:../../../projects/dicio/utility/light_pool.c ****  */
  38:../../../projects/dicio/utility/light_pool.c **** int8_t get_light_pool_index(light_pool_t *lp, uint8_t node_address) {
 409               	.LM7:
 410               	.LFBB2:
 411               	/* prologue: function */
 412               	/* frame size = 0 */
 413               	/* stack size = 0 */
 414               	.L__stack_usage = 0
 415               	.LBB4:
  39:../../../projects/dicio/utility/light_pool.c ****     for(uint8_t i = 0; i < lp->size; i++) {
 417               	.LM8:
 418 001c FC01      		movw r30,r24
 419 001e 8191      		ld r24,Z+
 420 0020 90E0      		ldi r25,0
 421               	.L9:
 423               	.LM9:
 424 0022 9817      		cp r25,r24
 425 0024 01F0      		breq .L13
  40:../../../projects/dicio/utility/light_pool.c ****         if(lp->node_id[i] == node_address) {
 427               	.LM10:
 428 0026 2191      		ld r18,Z+
 429 0028 2613      		cpse r18,r22
 430 002a 00C0      		rjmp .L10
  41:../../../projects/dicio/utility/light_pool.c ****             return i;
 432               	.LM11:
 433 002c 892F      		mov r24,r25
 434 002e 0895      		ret
 435               	.L10:
  39:../../../projects/dicio/utility/light_pool.c ****     for(uint8_t i = 0; i < lp->size; i++) {
 437               	.LM12:
 438 0030 9F5F      		subi r25,lo8(-(1))
 439 0032 00C0      		rjmp .L9
 440               	.L13:
 441               	.LBE4:
  42:../../../projects/dicio/utility/light_pool.c ****         }
  43:../../../projects/dicio/utility/light_pool.c ****     }
  44:../../../projects/dicio/utility/light_pool.c ****     return -1;
 443               	.LM13:
 444 0034 8FEF      		ldi r24,lo8(-1)
  45:../../../projects/dicio/utility/light_pool.c **** }
 446               	.LM14:
 447 0036 0895      		ret
 452               	.Lscope2:
 454               		.stabd	78,0,0
 459               	.global	add_to_light_pool
 461               	add_to_light_pool:
 462               		.stabd	46,0,0
  46:../../../projects/dicio/utility/light_pool.c **** 
  47:../../../projects/dicio/utility/light_pool.c **** /**
  48:../../../projects/dicio/utility/light_pool.c ****  * add_to_light_pool:
  49:../../../projects/dicio/utility/light_pool.c ****  *  - add a new item to the light pool
  50:../../../projects/dicio/utility/light_pool.c ****  *
  51:../../../projects/dicio/utility/light_pool.c ****  * @param lp - light pool to which new entry will be added
  52:../../../projects/dicio/utility/light_pool.c ****  * @param node_address - address of the node to be added
  53:../../../projects/dicio/utility/light_pool.c ****  * @param light_value - light value of node to be added
  54:../../../projects/dicio/utility/light_pool.c ****  * @returns '1' if add was successful, '-1' otherwise
  55:../../../projects/dicio/utility/light_pool.c ****  */
  56:../../../projects/dicio/utility/light_pool.c **** int8_t add_to_light_pool(light_pool_t *lp, uint8_t node_address, uint16_t light_value) {
 464               	.LM15:
 465               	.LFBB3:
 466 0038 EF92      		push r14
 467 003a FF92      		push r15
 468 003c 0F93      		push r16
 469 003e 1F93      		push r17
 470 0040 CF93      		push r28
 471 0042 DF93      		push r29
 472               	/* prologue: function */
 473               	/* frame size = 0 */
 474               	/* stack size = 6 */
 475               	.L__stack_usage = 6
  57:../../../projects/dicio/utility/light_pool.c ****     if((lp->size < MAX_POOL) && (in_light_pool(lp, node_address) == -1)) {
 477               	.LM16:
 478 0044 FC01      		movw r30,r24
 479 0046 C081      		ld r28,Z
 480 0048 C830      		cpi r28,lo8(8)
 481 004a 00F4      		brsh .L17
 482 004c 7A01      		movw r14,r20
 483 004e D62F      		mov r29,r22
 484 0050 8C01      		movw r16,r24
 486               	.LM17:
 487 0052 0E94 0000 		call in_light_pool
 488 0056 8F3F      		cpi r24,lo8(-1)
 489 0058 01F4      		brne .L17
 490               	.LBB5:
  58:../../../projects/dicio/utility/light_pool.c ****         uint8_t index = lp->size;
  59:../../../projects/dicio/utility/light_pool.c ****         lp->size++;
 492               	.LM18:
 493 005a 81E0      		ldi r24,lo8(1)
 494 005c 8C0F      		add r24,r28
 495 005e F801      		movw r30,r16
 496 0060 8083      		st Z,r24
  60:../../../projects/dicio/utility/light_pool.c ****         lp->node_id[index] = node_address;
 498               	.LM19:
 499 0062 2C2F      		mov r18,r28
 500 0064 30E0      		ldi r19,0
 501 0066 E20F      		add r30,r18
 502 0068 F31F      		adc r31,r19
 503 006a D183      		std Z+1,r29
  61:../../../projects/dicio/utility/light_pool.c ****         lp->light_values[index] = light_value;
 505               	.LM20:
 506 006c 2E5F      		subi r18,-2
 507 006e 3F4F      		sbci r19,-1
 508 0070 220F      		lsl r18
 509 0072 331F      		rol r19
 510 0074 F801      		movw r30,r16
 511 0076 E20F      		add r30,r18
 512 0078 F31F      		adc r31,r19
 513 007a F182      		std Z+1,r15
 514 007c E082      		st Z,r14
  62:../../../projects/dicio/utility/light_pool.c ****         return 1;
 516               	.LM21:
 517 007e 81E0      		ldi r24,lo8(1)
 518 0080 00C0      		rjmp .L15
 519               	.L17:
 520               	.LBE5:
  63:../../../projects/dicio/utility/light_pool.c ****     }
  64:../../../projects/dicio/utility/light_pool.c ****     return -1;
 522               	.LM22:
 523 0082 8FEF      		ldi r24,lo8(-1)
 524               	.L15:
 525               	/* epilogue start */
  65:../../../projects/dicio/utility/light_pool.c **** }
 527               	.LM23:
 528 0084 DF91      		pop r29
 529 0086 CF91      		pop r28
 530 0088 1F91      		pop r17
 531 008a 0F91      		pop r16
 532 008c FF90      		pop r15
 533 008e EF90      		pop r14
 534 0090 0895      		ret
 536               	.Lscope3:
 538               		.stabd	78,0,0
 543               	.global	update_light_pool
 545               	update_light_pool:
 546               		.stabd	46,0,0
  66:../../../projects/dicio/utility/light_pool.c **** 
  67:../../../projects/dicio/utility/light_pool.c **** /**
  68:../../../projects/dicio/utility/light_pool.c ****  * update_light_pool:
  69:../../../projects/dicio/utility/light_pool.c ****  *  - update the light pool with new light value
  70:../../../projects/dicio/utility/light_pool.c ****  *
  71:../../../projects/dicio/utility/light_pool.c ****  * @param lp - light pool to be updated
  72:../../../projects/dicio/utility/light_pool.c ****  * @param node_address - node whose light value needs updating
  73:../../../projects/dicio/utility/light_pool.c ****  * @param light_value - new light value of node_address
  74:../../../projects/dicio/utility/light_pool.c ****  * @returns '1' if update was successful, '-1' otherwise
  75:../../../projects/dicio/utility/light_pool.c ****  */
  76:../../../projects/dicio/utility/light_pool.c **** int8_t update_light_pool(light_pool_t *lp, uint8_t node_address, uint16_t light_value) {
 548               	.LM24:
 549               	.LFBB4:
 550 0092 EF92      		push r14
 551 0094 FF92      		push r15
 552 0096 1F93      		push r17
 553 0098 CF93      		push r28
 554 009a DF93      		push r29
 555               	/* prologue: function */
 556               	/* frame size = 0 */
 557               	/* stack size = 5 */
 558               	.L__stack_usage = 5
 559 009c EC01      		movw r28,r24
 560 009e 162F      		mov r17,r22
 561 00a0 7A01      		movw r14,r20
  77:../../../projects/dicio/utility/light_pool.c ****     int8_t in_lp, index;
  78:../../../projects/dicio/utility/light_pool.c ****     
  79:../../../projects/dicio/utility/light_pool.c ****     in_lp = in_light_pool(lp, node_address);
 563               	.LM25:
 564 00a2 0E94 0000 		call in_light_pool
  80:../../../projects/dicio/utility/light_pool.c ****     if(in_lp == -1) {
 566               	.LM26:
 567 00a6 8F3F      		cpi r24,lo8(-1)
 568 00a8 01F4      		brne .L19
  81:../../../projects/dicio/utility/light_pool.c ****         add_to_light_pool(lp, node_address, light_value);
 570               	.LM27:
 571 00aa A701      		movw r20,r14
 572 00ac 612F      		mov r22,r17
 573 00ae CE01      		movw r24,r28
 574 00b0 0E94 0000 		call add_to_light_pool
 575 00b4 00C0      		rjmp .L22
 576               	.L19:
  82:../../../projects/dicio/utility/light_pool.c ****         return 1;
  83:../../../projects/dicio/utility/light_pool.c ****     } else {
  84:../../../projects/dicio/utility/light_pool.c ****         index = get_light_pool_index(lp, node_address);
 578               	.LM28:
 579 00b6 612F      		mov r22,r17
 580 00b8 CE01      		movw r24,r28
 581 00ba 0E94 0000 		call get_light_pool_index
  85:../../../projects/dicio/utility/light_pool.c ****         if(index >= 0) {
 583               	.LM29:
 584 00be 87FD      		sbrc r24,7
 585 00c0 00C0      		rjmp .L21
  86:../../../projects/dicio/utility/light_pool.c ****             lp->light_values[index] = light_value;
 587               	.LM30:
 588 00c2 92E0      		ldi r25,lo8(2)
 589 00c4 8902      		muls r24,r25
 590 00c6 C00D      		add r28,r0
 591 00c8 D11D      		adc r29,r1
 592 00ca 1124      		clr __zero_reg__
 593 00cc FD82      		std Y+5,r15
 594 00ce EC82      		std Y+4,r14
 595               	.L22:
  87:../../../projects/dicio/utility/light_pool.c ****             return 1;
 597               	.LM31:
 598 00d0 81E0      		ldi r24,lo8(1)
 599 00d2 00C0      		rjmp .L20
 600               	.L21:
  88:../../../projects/dicio/utility/light_pool.c ****         }        
  89:../../../projects/dicio/utility/light_pool.c ****     }
  90:../../../projects/dicio/utility/light_pool.c **** 
  91:../../../projects/dicio/utility/light_pool.c ****     return -1;
 602               	.LM32:
 603 00d4 8FEF      		ldi r24,lo8(-1)
 604               	.L20:
 605               	/* epilogue start */
  92:../../../projects/dicio/utility/light_pool.c **** }
 607               	.LM33:
 608 00d6 DF91      		pop r29
 609 00d8 CF91      		pop r28
 610 00da 1F91      		pop r17
 611 00dc FF90      		pop r15
 612 00de EF90      		pop r14
 613 00e0 0895      		ret
 618               	.Lscope4:
 620               		.stabd	78,0,0
 621               		.section	.rodata.str1.1,"aMS",@progbits,1
 622               	.LC0:
 623 0000 2020 2D3E 		.string	"  -> id: %d, value: %d\r\n"
 623      2069 643A 
 623      2025 642C 
 623      2076 616C 
 623      7565 3A20 
 624               		.text
 627               	.global	print_light_pool
 629               	print_light_pool:
 630               		.stabd	46,0,0
  93:../../../projects/dicio/utility/light_pool.c **** 
  94:../../../projects/dicio/utility/light_pool.c **** void print_light_pool(light_pool_t *lp) {
 632               	.LM34:
 633               	.LFBB5:
 634 00e2 EF92      		push r14
 635 00e4 FF92      		push r15
 636 00e6 0F93      		push r16
 637 00e8 1F93      		push r17
 638 00ea CF93      		push r28
 639               	/* prologue: function */
 640               	/* frame size = 0 */
 641               	/* stack size = 5 */
 642               	.L__stack_usage = 5
 643 00ec 8C01      		movw r16,r24
  95:../../../projects/dicio/utility/light_pool.c ****     nrk_kprintf(PSTR("\r\nCurrent Light Values:\r\n"));
 645               	.LM35:
 646 00ee 80E0      		ldi r24,lo8(__c.3723)
 647 00f0 90E0      		ldi r25,hi8(__c.3723)
 648 00f2 0E94 0000 		call nrk_kprintf
 649               	.LBB6:
  96:../../../projects/dicio/utility/light_pool.c ****     for(uint8_t k = 0; k < lp->size; k++) {
 651               	.LM36:
 652 00f6 C0E0      		ldi r28,0
  97:../../../projects/dicio/utility/light_pool.c ****       printf("  -> id: %d, value: %d\r\n", lp->node_id[k], lp->light_values[k]);
 654               	.LM37:
 655 00f8 90E0      		ldi r25,lo8(.LC0)
 656 00fa E92E      		mov r14,r25
 657 00fc 90E0      		ldi r25,hi8(.LC0)
 658 00fe F92E      		mov r15,r25
 659               	.L24:
  96:../../../projects/dicio/utility/light_pool.c ****     for(uint8_t k = 0; k < lp->size; k++) {
 661               	.LM38:
 662 0100 F801      		movw r30,r16
 663 0102 8081      		ld r24,Z
 664 0104 C817      		cp r28,r24
 665 0106 00F4      		brsh .L26
 667               	.LM39:
 668 0108 2C2F      		mov r18,r28
 669 010a 30E0      		ldi r19,0
 670 010c F901      		movw r30,r18
 671 010e 3296      		adiw r30,2
 672 0110 EE0F      		lsl r30
 673 0112 FF1F      		rol r31
 674 0114 E00F      		add r30,r16
 675 0116 F11F      		adc r31,r17
 676 0118 8181      		ldd r24,Z+1
 677 011a 8F93      		push r24
 678 011c 8081      		ld r24,Z
 679 011e 8F93      		push r24
 680 0120 F801      		movw r30,r16
 681 0122 E20F      		add r30,r18
 682 0124 F31F      		adc r31,r19
 683 0126 8181      		ldd r24,Z+1
 684 0128 1F92      		push __zero_reg__
 685 012a 8F93      		push r24
 686 012c FF92      		push r15
 687 012e EF92      		push r14
 688 0130 0E94 0000 		call printf
  96:../../../projects/dicio/utility/light_pool.c ****     for(uint8_t k = 0; k < lp->size; k++) {
 690               	.LM40:
 691 0134 CF5F      		subi r28,lo8(-(1))
 692 0136 0F90      		pop __tmp_reg__
 693 0138 0F90      		pop __tmp_reg__
 694 013a 0F90      		pop __tmp_reg__
 695 013c 0F90      		pop __tmp_reg__
 696 013e 0F90      		pop __tmp_reg__
 697 0140 0F90      		pop __tmp_reg__
 698 0142 00C0      		rjmp .L24
 699               	.L26:
 700               	/* epilogue start */
 701               	.LBE6:
  98:../../../projects/dicio/utility/light_pool.c ****     }
  99:../../../projects/dicio/utility/light_pool.c **** }...
 703               	.LM41:
 704 0144 CF91      		pop r28
 705 0146 1F91      		pop r17
 706 0148 0F91      		pop r16
 707 014a FF90      		pop r15
 708 014c EF90      		pop r14
 709 014e 0895      		ret
 714               	.Lscope5:
 716               		.stabd	78,0,0
 717               		.section	.progmem.data,"a",@progbits
 720               	__c.3723:
 721 0000 0D0A 4375 		.string	"\r\nCurrent Light Values:\r\n"
 721      7272 656E 
 721      7420 4C69 
 721      6768 7420 
 721      5661 6C75 
 722               		.comm	error_num,1,1
 723               		.comm	error_task,1,1
 724               		.comm	bmac_rfTxInfo,7,1
 725               		.comm	bmac_rfRxInfo,12,1
 726               		.comm	bmac_enable_signal,1,1
 727               		.comm	bmac_tx_pkt_done_signal,1,1
 728               		.comm	bmac_rx_pkt_signal,1,1
 729               		.comm	nrk_kernel_stk_ptr,2,1
 730               		.comm	nrk_idle_task_stk,512,1
 731               		.comm	_nrk_signal_list,4,1
 742               		.text
 744               	.Letext0:
 745               		.ident	"GCC: (GNU) 4.9.1"
 746               	.global __do_copy_data
 747               	.global __do_clear_bss
DEFINED SYMBOLS
                            *ABS*:0000000000000000 light_pool.c
/var/folders/57/dy66zcf543x9s42pt1yfw30r0000gn/T//ccXzb5Fa.s:2      *ABS*:000000000000003e __SP_H__
/var/folders/57/dy66zcf543x9s42pt1yfw30r0000gn/T//ccXzb5Fa.s:3      *ABS*:000000000000003d __SP_L__
/var/folders/57/dy66zcf543x9s42pt1yfw30r0000gn/T//ccXzb5Fa.s:4      *ABS*:000000000000003f __SREG__
/var/folders/57/dy66zcf543x9s42pt1yfw30r0000gn/T//ccXzb5Fa.s:5      *ABS*:000000000000003b __RAMPZ__
/var/folders/57/dy66zcf543x9s42pt1yfw30r0000gn/T//ccXzb5Fa.s:6      *ABS*:0000000000000000 __tmp_reg__
/var/folders/57/dy66zcf543x9s42pt1yfw30r0000gn/T//ccXzb5Fa.s:7      *ABS*:0000000000000001 __zero_reg__
/var/folders/57/dy66zcf543x9s42pt1yfw30r0000gn/T//ccXzb5Fa.s:356    .text:0000000000000000 in_light_pool
/var/folders/57/dy66zcf543x9s42pt1yfw30r0000gn/T//ccXzb5Fa.s:406    .text:000000000000001c get_light_pool_index
/var/folders/57/dy66zcf543x9s42pt1yfw30r0000gn/T//ccXzb5Fa.s:461    .text:0000000000000038 add_to_light_pool
/var/folders/57/dy66zcf543x9s42pt1yfw30r0000gn/T//ccXzb5Fa.s:545    .text:0000000000000092 update_light_pool
/var/folders/57/dy66zcf543x9s42pt1yfw30r0000gn/T//ccXzb5Fa.s:629    .text:00000000000000e2 print_light_pool
/var/folders/57/dy66zcf543x9s42pt1yfw30r0000gn/T//ccXzb5Fa.s:720    .progmem.data:0000000000000000 __c.3723
                            *COM*:0000000000000001 error_num
                            *COM*:0000000000000001 error_task
                            *COM*:0000000000000007 bmac_rfTxInfo
                            *COM*:000000000000000c bmac_rfRxInfo
                            *COM*:0000000000000001 bmac_enable_signal
                            *COM*:0000000000000001 bmac_tx_pkt_done_signal
                            *COM*:0000000000000001 bmac_rx_pkt_signal
                            *COM*:0000000000000002 nrk_kernel_stk_ptr
                            *COM*:0000000000000200 nrk_idle_task_stk
                            *COM*:0000000000000004 _nrk_signal_list

UNDEFINED SYMBOLS
nrk_kprintf
printf
__do_copy_data
__do_clear_bss
